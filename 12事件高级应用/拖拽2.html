<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>拖拽2</title>
	<style>
		#div1 {width:100px; height:100px; background: red; position: absolute;}
		#div2 {width: 700px; height: 500px; background: gray; position: relative}
	</style>
	<script>
		window.onload=function(){
			var oDiv=document.getElementById('div1');
			var oDiv2=document.getElementById('div2');

			var disX=0;
			var disY=0;

			oDiv.onmousedown=function(ev){
				var oEvent=ev||event;

				disX=oEvent.clientX-oDiv.offsetLeft;
				disY=oEvent.clientY-oDiv.offsetTop;

				if(oDiv.setCapture){//IE
					oDiv.onmousemove=function(ev){
						var oEvent=ev||event;
						var l=oEvent.clientX-disX;
						var t=oEvent.clientY-disY;


						oDiv.style.left=l+'px';
						oDiv.style.top=t+'px';

						
					}

					oDiv.onmouseup=function(){
						
						oDiv.onmousemove=null;
						oDiv.onmouseup=null;

						oDiv.releaseCapture();

					}

					oDiv.setCapture();

				}else{
					//chrome, ff
					document.onmousemove=function(ev){
					var oEvent=ev||event;
					var l=oEvent.clientX-disX;
					var t=oEvent.clientY-disY;


					oDiv.style.left=l+'px';
					oDiv.style.top=t+'px';

					
					}

					document.onmouseup=function(){
						
						document.onmousemove=null;
						document.onmouseup=null;

					}
				}

				return false; //chrome, ff, IE9

			}

			
		}
	</script>
</head>
<body>
    sdfgasg <br>
    sadgasgda
	<div id="div1">sadfasfdasdfasf <br> basdfa</div>
	asdgasdfasg <br>
	dgasdfasf

</body>
</html>