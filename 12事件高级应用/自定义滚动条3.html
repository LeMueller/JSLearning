<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>自定义滚动条3</title>
	<style>
		#parent {width: 600px; height: 20px; background: #CCC; position: relative; margin: 10px auto;}
		#div1 {width: 20px; height: 20px; background: red; position: absolute; left: 0; top: 0}
		#div2 {width:400px; height: 300px; border: 1px solid black; overflow: hidden; position: relative;}
		#div3 {position: absolute; left: 0; top: 0px; padding: 4px;}
	</style>
	<script>
		window.onload=function(){

			var oParent=document.getElementById('parent');
			var oDiv=document.getElementById('div1');
			var oDiv2=document.getElementById('div2');
			var oDiv3=document.getElementById('div3');

			var disX=0;

			oDiv.onmousedown=function(ev){
				var oEvent=ev||event;

				disX=oEvent.clientX-oDiv.offsetLeft;

				document.onmousemove=function(ev){
					var oEvent=ev||event;
					var l=oEvent.clientX-disX;

					if(l<0){
						l=0;
					}else if(l>oParent.offsetWidth-oDiv.offsetWidth){
						l=oParent.offsetWidth-oDiv.offsetWidth
					}


					oDiv.style.left=l+'px';

					var scale=l/580;
					//document.title=scale;
					
					oDiv3.style.top=-scale*(oDiv3.offsetHeight-oDiv2.offsetHeight)+'px';
					
				}

				document.onmouseup=function(){
					
					document.onmousemove=null;
					document.onmouseup=null;

				}

				return false; //chrome, ff, IE9

			}

			
		}
	</script>
</head>
<body>
	<div id="parent">
		<div id="div1"></div>
	</div>
	<div id="div2">
		<div id="div3">
			Lorem ipsum dolor sit amet, consectetur adipisicing elit. Magnam deserunt doloremque rem reprehenderit error aperiam est cupiditate, quam, voluptas tempore, ex impedit assumenda. Id cum dolorem qui, enim ipsum. Reiciendis animi illo enim dignissimos, qui rerum, pariatur minima aperiam. Provident alias ab dignissimos! Quas, sint voluptas amet qui. Mollitia, sapiente nisi rem dolorum officiis temporibus dicta ipsum doloribus voluptatum laboriosam. Incidunt id in, rem qui inventore veniam voluptates dicta. Veritatis ex esse veniam officiis soluta iure aliquam molestiae, labore facere. Culpa odit, vero sunt consequatur non, magnam facilis. Nulla asperiores maxime similique reprehenderit ducimus eum cum facere distinctio delectus molestias quis voluptatibus tempora unde modi voluptate, nostrum possimus illo rem rerum excepturi porro error iusto placeat. Illo soluta optio expedita sequi corporis rem culpa debitis, similique itaque magnam omnis doloremque impedit eaque, facere perspiciatis nihil distinctio voluptatem maiores nulla dolore ad ipsam molestiae est quo. Pariatur obcaecati enim officiis! Pariatur dolore, aperiam illo! Neque iste iusto, cumque dolor sequi dignissimos ab error ducimus doloribus accusantium, ipsa molestias velit omnis ex, vel repudiandae! Adipisci ipsum labore atque nobis omnis nemo, quidem autem aspernatur! Natus dignissimos, ipsum hic totam aperiam odit veritatis commodi fugit magni nobis sunt! Reprehenderit qui unde rerum dolorum iure dicta quaerat natus voluptate! Iste illo accusamus nulla perspiciatis amet ex impedit quam porro id quo tempora aperiam, laborum labore dicta. Ut ducimus quam fugit perspiciatis magni deserunt, magnam sit quis a laborum aliquam culpa iste asperiores accusamus quasi, nobis. Illo suscipit beatae ad incidunt blanditiis tempore hic saepe consequatur. Repudiandae sit cum officia, explicabo modi consequuntur hic temporibus, harum architecto voluptas. Corporis itaque explicabo nobis necessitatibus molestiae vel dignissimos quaerat minima neque eligendi quas ratione ipsum sequi, praesentium, repudiandae, animi voluptatem hic, dolor beatae excepturi amet cum quasi commodi fugit. Commodi, at recusandae assumenda sequi autem deleniti et asperiores quos dolore porro fuga inventore aperiam minima eos. Atque repellendus quia odit in! Perferendis tempora voluptatem quibusdam, quis quisquam a repellendus tempore ab libero voluptates, cupiditate dolorem vitae, harum quam necessitatibus? Sint maiores dolore, assumenda nam, ullam illum consequatur, quis animi ipsum iusto tempora, quo ipsa dolorum dignissimos eaque dolor aperiam voluptatum reiciendis. Deserunt distinctio, expedita iure iusto. Eaque ad maxime soluta pariatur harum quaerat natus officiis neque ipsam, totam vel delectus! Quaerat illum, delectus exercitationem asperiores commodi. Ducimus perspiciatis, praesentium numquam, harum sed eius in molestiae ipsum magnam ut dicta vel eaque incidunt dolor aliquam laudantium asperiores est laboriosam quod fuga cupiditate necessitatibus blanditiis aspernatur. Eos, alias? Minima esse maiores, odio cumque provident! Blanditiis in, totam doloremque nobis temporibus quaerat nam officiis facilis veniam fugiat asperiores ullam! Provident adipisci voluptate ad obcaecati, deleniti omnis voluptas architecto odit qui autem inventore tenetur impedit dolores nisi fugiat earum saepe, ipsa, molestiae esse, perferendis vel. Quae fuga minus aut vel rerum beatae eum, natus voluptas vero nulla cumque tempora fugit facilis aperiam itaque, reprehenderit ipsa nemo. Repellat voluptatem dolorem, ullam itaque ex modi. Nihil commodi reiciendis, rerum voluptatibus aliquam officiis impedit, nemo molestiae eos quod voluptas iste repudiandae doloremque dolorum, magnam.
		</div>
	</dvi>
</body>
</html>